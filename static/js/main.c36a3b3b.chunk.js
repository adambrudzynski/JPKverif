(this["webpackJsonpjpk-verif"]=this["webpackJsonpjpk-verif"]||[]).push([[0],{56:function(e,t,n){},74:function(e,t){},76:function(e,t){},86:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var r=n(4),c=n.n(r),a=n(51),s=n.n(a),i=(n(56),n(2)),o=n.n(i),u=n(6),l=n(10);function p(e){return d.apply(this,arguments)}function d(){return(d=Object(u.a)(o.a.mark((function e(t){var n,r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,crypto.subtle.digest("SHA-256",t);case 2:return n=e.sent,r=Array.from(new Uint8Array(n)),c=r.map((function(e){return e.toString(16).padStart(2,"0")})).join(""),e.abrupt("return",j(c));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(e){return btoa(String.fromCharCode.apply(null,e.replace(/\r|\n/g,"").replace(/([\da-fA-F]{2}) ?/g,"0x$1 ").replace(/ +$/,"").split(" ")))}var b=n(0),f=n(59).parseString,O="https://cors.3cstop.workers.dev/?";function h(){var e=Object(r.useState)(""),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)(""),s=Object(l.a)(a,2),i=s[0],d=s[1],j=Object(r.useState)(""),h=Object(l.a)(j,2),g=h[0],x=h[1],v=Object(r.useState)(),y=Object(l.a)(v,2),S=y[0],m=y[1],k=Object(r.useState)(""),w=Object(l.a)(k,2),P=w[0],z=w[1],C=function(){var e=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=new FileReader).readAsArrayBuffer(t.target.files[0]),n.onload=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p(n.result);case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)}))),n.onerror=function(){console.log(n.error),c("b\u0142\u0105d :( ")};case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(e,t){e.preventDefault(),function(e,t){U.apply(this,arguments)}(i,t)};function U(){return(U=Object(u.a)(o.a.mark((function e(t,n){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(""),m(""),z(""),e.next=5,fetch("".concat(O,"https://").concat("test"===n?"test-":"","e-dokumenty.mf.gov.pl/api/Storage/Status/").concat(t));case 5:return r=e.sent,e.next=8,r.json();case 8:(c=e.sent).Description&&z(c.Description),c.Upo&&f(c.Upo,(function(e,t){console.log(t["ds:Signature"]["ds:Object"]);var n=t["ds:Signature"]["ds:Object"][1].Potwierdzenie?t["ds:Signature"]["ds:Object"][1].Potwierdzenie[0]:t["ds:Signature"]["ds:Object"][0].Potwierdzenie[0],r=n.SkrotDokumentu[0].match(/(?<=\[).+?(?=\])/gm)[0];m(n),x(r)}));case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"block",children:[Object(b.jsx)("input",{type:"file",onChange:function(e){return C(e)}}),Object(b.jsx)("label",{htmlFor:"fileHash",children:"Skr\xf3t za\u0142\u0105czonego pliku XML"}),Object(b.jsx)("input",{id:"fileHash",type:"text",disabled:!0,value:n,style:{color:n===g?"green":"red"}})]}),Object(b.jsxs)("div",{className:"block",children:[Object(b.jsx)("label",{htmlFor:"nrUPO",children:"Nr referencyjny (UPO):"}),Object(b.jsx)("input",{id:"nrUPO",placeholder:"Nr referencyjny...",onChange:function(e){var t=e.target;d(t.value)},value:i,type:"text"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("button",{onClick:F,disabled:32!==i.length,children:"Pobierz UPO"}),Object(b.jsx)("button",{onClick:function(e){return F(e,"test")},disabled:32!==i.length,children:"Pobierz UPO z bamki TEST"})]}),Object(b.jsx)("input",{value:P,disabled:!0,placeholder:"Status"}),Object(b.jsx)("label",{children:"Skr\xf3t z\u0142o\u017conego dokumentu pobrany z UPO:"}),Object(b.jsx)("input",{type:"text",disabled:!0,value:g,style:{color:n===g?"green":"red"}}),Object(b.jsx)("textarea",{disabled:!0,value:JSON.stringify(S,null,2)})]})]})}n(86);var g=function(){return Object(b.jsx)("div",{className:"App",children:Object(b.jsx)(h,{})})},x=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,88)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),r(e),c(e),a(e),s(e)}))};s.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(g,{})}),document.getElementById("root")),x()}},[[87,1,2]]]);
//# sourceMappingURL=main.c36a3b3b.chunk.js.map